---
icon: mobile-button
---

# dApp 위협 모델링

## DFD(Data Flow Diagrams)

<figure><img src="../.gitbook/assets/image (6).png" alt=""><figcaption></figcaption></figure>

{% embed url="https://excalidraw.com/#json=gGGCCojm7kkabwJfM0IR6,iVjhKQcAPS-afwI1TJgKmg" %}
DFD Link
{% endembed %}

## Entity

<table><thead><tr><th width="100" align="center">ID</th><th width="160" align="center">Name</th><th>Description</th></tr></thead><tbody><tr><td align="center"><mark style="color:yellow;"><code>ET - 1</code></mark></td><td align="center">Distributor</td><td>BGT와 incentive token 분배 로직을 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 2</code></mark></td><td align="center">RewardVault</td><td>LP token을 예치받고 BGT를 분배</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 3</code></mark></td><td align="center">BlockReward<br>Controller</td><td>BGT 발행 담당</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 4</code></mark></td><td align="center">BGTIncentive<br>Distributor</td><td>BGT 발행량 기준으로 incentive token을 분배</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 5</code></mark></td><td align="center">BGTStaker</td><td>BGT Boost를 관리하고 Boost 보상으로 HONEY 제공</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 6</code></mark></td><td align="center">CometBFT</td><td>Berachain의 BFT 합의 모듈</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 7</code></mark></td><td align="center">BeaconDeposit</td><td>validator가 되기 위해 BERA 예치를 처리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 8</code></mark></td><td align="center">Operator</td><td>validator가 reward allocation과 commission 설정을 위임한 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 9</code></mark></td><td align="center">dApp owner</td><td>FeeCollector에 dApp 수수료를 전송하는 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 10</code></mark></td><td align="center">Oracle</td><td>HONEY / NECT 담보의 가격을 가져오는 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 11</code></mark></td><td align="center">Guardians</td><td>거버넌스에서 최종 결정을 하는 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 12</code></mark></td><td align="center">BatchRelayer</td><td>Balancer v2 기반 BEX 작업 일괄 처리 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 13</code></mark></td><td align="center">BalancerRelayer</td><td>Balancer v2 기반 BEX 멀티콜 중개 주체</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 14</code></mark></td><td align="center"><p>ProtocolFees</p><p>Withdrawer</p></td><td>BEX 프로토콜 사용 수수료 인출</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 15</code></mark></td><td align="center">BEXAuthorizer</td><td>BEX 유동성 풀 생성 승인자</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 16</code></mark></td><td align="center">KodiakIsland</td><td>Kodiak 자동 유동성 관리 Vault</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 17</code></mark></td><td align="center"><p>KodiakIsland</p><p>Factory</p></td><td>KodiakIsland 생성 관리자</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 18</code></mark></td><td align="center"><p>KodiakIsland</p><p>WithRouter</p></td><td>Kodiak의 Island와 Router 기능 결합 컨트랙트</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 19</code></mark></td><td align="center">IslandRouter</td><td>Kodiak 사용자의 Island 유동성 공급 컨트랙트</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 20</code></mark></td><td align="center">KodiakFarm</td><td>Kodiak 보상 분배 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 21</code></mark></td><td align="center">PandaFactory</td><td>Kodiak 기반 ERC-20 Meme 코인 런치패드</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 22</code></mark></td><td align="center">UniswapV3Pool</td><td>Kodiak 내 UniswapV3 기반 유동성 풀 컨트랙트</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 23</code></mark></td><td align="center">Infrared</td><td>Infrared 핵심 기능 관리자</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 24</code></mark></td><td align="center">InfraredBERA</td><td>Infrared BERA 토큰 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 25</code></mark></td><td align="center"><p>InfraredBERA</p><p>Depositor</p></td><td>Infrared BERA 자산 입금 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 26</code></mark></td><td align="center"><p>InfraredBERA</p><p>Claimor</p></td><td>Infrared BERA 보상 수령 요청자</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 27</code></mark></td><td align="center"><p>InfraredBERA</p><p>Withdrawor</p></td><td>Infrared BERA 자산 인출 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 28</code></mark></td><td align="center"><p>InfraredBERA</p><p>FeeReceivor</p></td><td>Infrared 수수료 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 29</code></mark></td><td align="center"><p>Infrared</p><p>Distributor</p></td><td>Infrared 보상 분배 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 30</code></mark></td><td align="center">InfraredVault</td><td>Infrared 보상 금고</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 31</code></mark></td><td align="center">MultiReward</td><td>Infrared 다중 보상 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 32</code></mark></td><td align="center">BribeCollector</td><td>Infrared 프로토콜 인센티브 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 33</code></mark></td><td align="center">CollVaultRouter</td><td>Beraborrow 대출 진행 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 34</code></mark></td><td align="center">DenManager</td><td>Beraborrow 담보 처리 시스템</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 35</code></mark></td><td align="center">DebtToken</td><td>Beraborrow 대출 LP 토큰 (NECT) 관리</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 36</code></mark></td><td align="center"><p>LiquidStability</p><p>Pool</p></td><td>Beraborrow NECT 스테이킹 풀</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 37</code></mark></td><td align="center">CollectralVault</td><td>Beraborrow 담보 LP 토큰 발행 금고</td></tr><tr><td align="center"><mark style="color:yellow;"><code>ET - 38</code></mark></td><td align="center"><p>Liquidation</p><p>Manager</p></td><td>Beraborrow 청산 로직 관리</td></tr></tbody></table>

## Asset

<table><thead><tr><th width="100" align="center">ID</th><th width="160" align="center">Name</th><th>Description</th></tr></thead><tbody><tr><td align="center"><mark style="color:blue;"><code>AT - 1</code></mark></td><td align="center">BGT</td><td>Governance와 경제적 incentive로써 기능하는 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 2</code></mark></td><td align="center">BERA</td><td>가스와 예치 용도로 사용되는 native coin</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 3</code></mark></td><td align="center">WBERA</td><td>BERA를 ERC-20 규격으로 래핑한 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 4</code></mark></td><td align="center">Fee Token</td><td>다양한 dApp에서 발생하는 fee로 수집되는 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 5</code></mark></td><td align="center">LP Token<br>(Receipt Token)</td><td>Bex와 같은 프로토콜에 유동성을 공급함을 인증하는 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 6</code></mark></td><td align="center">Incentive Token</td><td>BGT 부스터들에게 보상으로 제공되는 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 7</code></mark></td><td align="center">HONEY</td><td>Berachain의 native stable coin</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 8</code></mark></td><td align="center">iBERA</td><td>Infrared 네이티브 BERA</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 9</code></mark></td><td align="center">iBGT</td><td>Infrared 네이티브 거버넌스 토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 10</code></mark></td><td align="center">Infrared Points</td><td>Infrared 활동 시 얻을 수 있는 추가 보상 점수</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 11</code></mark></td><td align="center">NECT</td><td>Beraborrow 네이티브 스테이블 코인</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 12</code></mark></td><td align="center">sNECT</td><td>Beraborrow NECT 스테이킹 보상용 LP토큰</td></tr><tr><td align="center"><mark style="color:blue;"><code>AT - 13</code></mark></td><td align="center">Collaterals</td><td>Beraborrow 대출 사용 가능 담보</td></tr></tbody></table>

## Entry Point

<table><thead><tr><th width="100" align="center">ID</th><th width="220" align="center">Name</th><th>Description</th></tr></thead><tbody><tr><td align="center"><mark style="color:purple;"><code>EP - 1</code></mark></td><td align="center">joinPool</td><td>BEX 유동성 풀 토큰 페어 공급 시작점</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 2</code></mark></td><td align="center">exitPool</td><td>BEX 유동성 풀 토큰 페어 인출 시작점</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 3</code></mark></td><td align="center">onJoinPool</td><td>BEX 유동성 풀에 지정한 토큰 페어 공급</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 4</code></mark></td><td align="center">onExitPool</td><td>BEX 유동성 풀에 공급한 토큰 페어 인출 </td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 5</code></mark></td><td align="center"><p>distributeAnd</p><p>WithdrawCollectedFees</p></td><td>BEX Fee Collector가 수집한 수수료를<br>Berachain PoL의 FeeCollector와 FeeReceiver로 송금</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 6</code></mark></td><td align="center">withdrawCollectedFee</td><td>BEX FeeCollector가 모아놓은 수수료 인출</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 7</code></mark></td><td align="center">deposit</td><td>프로토콜 컨트랙트에 BERA를 예치</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 8</code></mark></td><td align="center">withdraw</td><td>프로토콜 컨트랙트에서 BERA를 인출</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 9</code></mark></td><td align="center">swap</td><td>BEX 유동성 풀 단일 스왑 실행</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 10</code></mark></td><td align="center">batchSwap</td><td>BEX 유동성 풀에 대한 여러 스왑을 한번에 실행</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 11</code></mark></td><td align="center">queryBatchSwap</td><td>BEX batchSwap 작업에 대한 예약</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 12</code></mark></td><td align="center">create</td><td>새로운 BEX 유동성 풀 생성</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 13</code></mark></td><td align="center">addLiquidity</td><td>Kodiak 유동성 풀에 ERC-20 토큰 페어 공급</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 14</code></mark></td><td align="center">addLiquidityNative</td><td>Kodiak 유동성 풀에 ERC-20 - BERA 토큰 페어 공급</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 15</code></mark></td><td align="center">addLiquiditySingle</td><td>Kodiak ERC-20 토큰 페어 풀 단방향 유동성 공급</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 16</code></mark></td><td align="center">addLiquiditySingleNative</td><td>Kodiak ERC-20 - BERA 토큰 페어 풀 단방향 유동성 공급</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 17</code></mark></td><td align="center">removeLiquidity</td><td>Kodiak 유동성 풀에 ERC-20 토큰 페어 출금</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 18</code></mark></td><td align="center">removeLiquidityNative</td><td>Kodiak 유동성 풀에 ERC-20 - BERA 토큰 페어 출금</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 19</code></mark></td><td align="center">KodiakFarm.stake</td><td>Kodiak 보상 분배 금고에 LP 토큰 스테이킹</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 20</code></mark></td><td align="center">KodiakFarm.withdraw</td><td>Kodiak 보상 분배 금고에 LP 토큰 인출</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 21</code></mark></td><td align="center">KodiakFarm.getReward</td><td>Kodiak 보상 분배 금고에 누적된 보상 토큰 청구</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 22</code></mark></td><td align="center"><p>KodiakIsland</p><p>FactorydeployVault</p></td><td>Kodiak 유동성 풀 컨트랙트 배포</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 23</code></mark></td><td align="center">FarmFactorydeployFarm</td><td>Kodiak 보상 분배 금고 컨트랙트 배포</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 24</code></mark></td><td align="center">InfraredVault.stake</td><td>Infrared 보상 금고에 LP 토큰 스테이킹</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 25</code></mark></td><td align="center">InfraredVaultwithdraw</td><td>Infrared 보상 금고에서 LP 토큰  인출</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 26</code></mark></td><td align="center">getReward</td><td>Infrared 보상 금고에 누적된 보상 토큰 청구</td></tr><tr><td align="center"></td><td align="center">mint</td><td>Infrared 내에서 BERA를 iBERA로 변환</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 27</code></mark></td><td align="center">redeem</td><td>Base BGT를 BERA로 교환하 InfraredBERAFeeReceivor로 전송</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 28</code></mark></td><td align="center">harvestVault</td><td>특정 자산에 대한 RewardVault의 보상을 수확하고 iBGT 발행</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 29</code></mark></td><td align="center">harvestOperatorRewards</td><td>InfraredBERAFeeReceivor에 축적된 운영자 보상 분배</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 30</code></mark></td><td align="center">claimBGTIncentives</td><td>Keeper가 BGTIncentiveDistributor로부터 인센티브 토큰 청구</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 31</code></mark></td><td align="center">harvestBribes</td><td>Infrared에 있는 인센티브 토큰을 BribeCollector로 이동</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 32</code></mark></td><td align="center">claimFees</td><td>BribeCollector에서 WBERA를 지불하여 인센티브 토큰 인출 </td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 33</code></mark></td><td align="center">collectBribes</td><td>BribeCollector의 WBERA를 Infrared로 회수</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 34</code></mark></td><td align="center">execute</td><td>Infrared 사용자의 출금 처리 시 BERA를 외부로 전송</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 35</code></mark></td><td align="center">process</td><td>Infrared 출금 큐에 있는 요청을 처리</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 36</code></mark></td><td align="center">sweep</td><td>InfraredBERAClaimor 누적 BERA를 사용자에게 전송</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 37</code></mark></td><td align="center">claim</td><td>validator의 pubkey에 해당하는 BGT 보상 청구</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 38</code></mark></td><td align="center">openDenVault</td><td>Beraborrow 내 새로운 CDP 대출 금고 생성</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 39</code></mark></td><td align="center">adjustDenVault</td><td>Beraborrow 내 기존 CDP 대출 금고의 담보/부채 조정</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 40</code></mark></td><td align="center">closeDenVault</td><td>Beraborrow 내 CDP 대출 금고 폐쇄</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 41</code></mark></td><td align="center">redeemCollateralVault</td><td>Beraborrow CDP 대출 상환</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 42</code></mark></td><td align="center">redeemToOne</td><td>Beraborrow에서 획득한 모든 보상을 단일 토큰으로 인출</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 43</code></mark></td><td align="center">liquidate</td><td>Beraborrow 내 불건전한 CDP 대출 이력 청산</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 44</code></mark></td><td align="center">flashLoan</td><td>Beraborrow 내 Flash Loan 기능 실행</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 45</code></mark></td><td align="center">mint</td><td>Beraborrow 내 NECT 예치하여 sNECT 발행</td></tr><tr><td align="center"><mark style="color:purple;"><code>EP - 46</code></mark></td><td align="center">redeem</td><td>Beraborrow 내 sNECT 소각 후 NECT 반환</td></tr></tbody></table>

## Scenarios

{% hint style="info" %}
ID 클릭 시 해당 시나리오의 보안 가이드라인을 확인하실 수 있습니다.
{% endhint %}

